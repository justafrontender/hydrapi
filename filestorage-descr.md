# File Storage description

## Процесс загрузки файла в сторадж
- Создание записи в коллекции
Передается оригинальное имя, размер, mime-type.

- Загрузка файла в теле POST запроса с URL /fileStorage/file/[entry_id]
Проверяется корректность ID.
Файл сохраняется в настроенную для загрузок директорию с именем, равным id записи в коллекции.
Если файл с таким именем существовал, загрузка отменяется.
Может быть добавлена проверка по размеру и типу.

## Получение файла
- GET запросом /fileStorage/[entry_id] загружается описание файла
Описание содержит поле url, по которому можно скачать файл.
По умолчанию, это /fileStorage/file/[entry_id]
- Файл загружается GET запросом по адресу из поля url
-- Проверяется корректность ID;
-- Из БД в заголовки устанавливается информация о типе, размере и имени?
(или как-то сэкономить запрос? доп инфо по запросу с параметром?)

## Удаление файла
Удаляется стандартным для hydrapi запросом DELETE /fileStorage
В теле запроса JSON
```
{ "fileStorage": [ массив id для удаления ]}
```
Перед удалением сущности из бд удаляется соответствующий файл.
Можно добавить проверку, не привязан ли файл к какой-либо сущности.

## Изменение файла
Изменение файла не предусмотрено.
Запретить PATCH запрос.
